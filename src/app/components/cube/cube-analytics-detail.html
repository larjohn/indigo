<md-card>
  <md-card-title-group>
    <md-card-title>Cube: {{ (cube$|async).pckg.title }}</md-card-title>
  </md-card-title-group>

  <md-card-content>
    <div class="col-sm-12">
      <div class="col-sm-12">
        <md-card *ngFor="let algorithm of algorithms">

          <md-card-content>
            <p>
              <md-toolbar color="primary">

                  <h4>{{ algorithm.title }}</h4>
                <button md-tooltip="Execute" style="margin-left: auto" md-mini-fab (click)="execute(algorithm)">

                  <md-icon class="md-24">play_circle_outline</md-icon>
                </button>



              </md-toolbar>
            </p>


            <div class="row">
              <div class="col-sm-4">
                <div *ngFor="let input of algorithm.inputs|iterable" class="col-sm-12">
                  <div *ngIf="input.type==InputTypes.BABBAGE_RAW_DATA">
                    <h4>Input: {{input.title}}</h4>

                    <request-builder [cube]="cube$|async" [(request)]="newAggregateRequest"></request-builder>
                  </div>
                  <!--<div *ngIf="input.type==InputTypes.ATTRIBUTE_REF">
                    <select class="form-control" [(ngModel)]="analysisCalls[algorithm.name]?.inputs[input.name]" >
                      <option [ngValue]="item" *ngFor="let item of (cube$|async).model?.attributes|iterable">{{item |
                        nestedProperty:'fullLabel'}}
                      </option>
                    </select>
                  </div>

                  <div *ngIf="input.type==InputTypes.AGGREGATE_REF">
                    <div class="col-sm-9 form-group">
                      <select class="form-control col-sm-6" [(ngModel)]="analysisCalls[algorithm.name]?.inputs[input.name]">
                        <option [ngValue]="item" *ngFor="let item of (cube$|async).model?.aggregates|iterable">{{item |
                          nestedProperty:'label'}}
                        </option>
                      </select>
                    </div>

                  </div>
-->



                  <div class="row-fluid col-sm-12 well" *ngIf="input.type==InputTypes.PARAMETER" >
                    <h4>Input: parameter</h4>
                    <div class="col-sm-12">

                      <input  class="form-control"  value="{{input.default_value}}"  placeholder="{{input.title}}" type="{{input.data_type}}" [(ngModel)]="analysisCalls[algorithm.name]?.inputs[input.name]">

                    </div>

                  </div>






                </div>


              </div>

              <div class="col-sm-6">
                <div >
                  <analytics-timeseries-output  class="col-sm-12" style="min-height: 500px;"   [data]="analysisCalls[algorithm.name]?.outputs['values']"></analytics-timeseries-output>
                </div>
              </div>
            </div>








          </md-card-content>

        </md-card>


      </div>



    </div>
  </md-card-content>



</md-card>
